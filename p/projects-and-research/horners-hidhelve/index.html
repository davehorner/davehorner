
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1" id="viewport-meta" />
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
  <link href="/favicon.ico" rel="icon" type="image/x-icon">
  <title>Horners HIDHelve</title>
  
  
	<script src=/js/jquery.min.js></script>
	<script src=/js/modernizr.custom.min.js></script>
	<script src=/js/TweenMax.min.js></script>
    <script src=/js/ScrollMagic.min.js></script>
	<script src=/js/animation.gsap.js></script>
	<script src=/js/debug.addIndicators.js></script> 
	<script src=/js/highlight.pack.js></script>
	<style type='text/css'>
.bordeaux {
    background-color: #953543;
}
	#pinContainer {
		width: 100%;
		height: 100%;
		overflow: hidden;
	}
	.panel {
		height: 100%;
		width: 100%;
		position: absolute;
	}

    section {
        border-radius: 10px;
        border: 3px dashed #1c87c9;
        margin-left:auto;margin-right:auto;
	    flex-direction: column;
	    flex-wrap: wrap;

    }
      h1 {
        font-family: 'Courier New', Courier, monospace;
        font-size: 15;
        margin: 0px;
	    border: 1px solid black;
      }


    .box1.outline, .box2.outline, .box3.outline {
	border: 1px solid white;
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
   
   });
  </script>
  <style>
    /**
 * Make body at least 100% height
 * You can also use a combination
 * of height: 100% in <html> and
 * min-height: 100% in <body>.
 */
.holy-grail {
	min-height: 100vh;
}
/**
 * Let's do a column distribution
 * (mobile first)
 * flex value is 1 1 auto to make
 * body skrinkable and extensible
 */
.holy-grail,
.holy-grail-body {
	display: flex;
	flex: 1 1 auto;
	flex-direction: column;
}

/**
 * Content body item is made
 * extensible too.
 */
.holy-grail-content {
	flex: 1 1 auto;
}

/**
 * Put the first sidebar before content.
 * If you need sidebar to be before content
 * only in big screen put those 3 next lines
 * in @media block.
 */
.holy-grail-sidebar-1 {
	order: -1;
}

/**
 * Let's introduce bigger screen
 */

@media (min-width: 768px) {
	/**
	 * Body items are now side by side
	 */
	.holy-grail-body {
		flex-direction: row;
	}

	/**
	 * Sidebars have a basic 260 width
	 * and are not really flexible anymore
	 */
	.hg-sidebar {
		flex: 0 0 160px;
	}
}
  </style>
</head>
<body>
 	<header>
"hello world"   <script type="module">
    import { search, default as init } from '/tinysearch_engine.js';
    window.search = search;

    async function run() {
      await init('/tinysearch_engine_bg.wasm');
    }
    run();
  </script>

  <script>
    // And afterwards we can use all the functionality defined in wasm.
    function doSearch() {
      let value = document.getElementById("search").value;
      console.log(`Search query: ${value}`);

      const results = search(value, 10);

      console.log(`Results: ${results}`);

      let ul = document.getElementById("results");
      ul.style.display="inline";
      ul.innerHTML = "";

      for (i = 0; i < results.length; i++) {
        var li = document.createElement("li");

        let [title, url] = results[i];
        let elemlink = document.createElement('a');
        elemlink.innerHTML = title;
        elemlink.setAttribute('href', url);
        li.appendChild(elemlink);

        ul.appendChild(li);
      }
    }
  </script>
  <input type="text" id="search" onkeyup="doSearch()" size="6">
  <ul id="results"></ul> <img id="banner.top"/>
	</header>
	<div class="holy-grail-body">
		<section class="holy-grail-content">
article in <a href="/p/">Personal</a>
<a href="/p/projects-and-research/">projects-and-research</a>
    <h1>Horners HIDHelve</h1>
   Horner's HIDHelve - handle your human interface device.<br/>
<a href="https://github.com/davehorner/HIDHelve">davehorner/HIDHelve · GitHub</a> - the code, just for you.<br/>
<br/>
<img src="https://raw.github.com/davehorner/HIDHelve/master/artwork/HornersHIDHelve.png" title="Horner's HIDHelve" alt="Horner's HIDHelve"/>
<h2>What the Helve?</h2>
helve /helv/<br/>
noun - The handle of a weapon or tool.<br/>
<br/>
<h2>What is HIDHelve?</h2>
HIDHelve listens to your USB HID devices for state changes and publishes that data in a variety of ways.<br/>
It's useful in automating some work to be done when smashing buttons.<br/>
Every tool or weapon you write shouldn't have to interface directly with the low level HID libraries.<br/>
HIDHelve decouples you from direct HID manipulation.<br/>
<br/>
HIDHelve is a collection of scripts/executables, consisting of:<br/>
<ul>
<li>HIDHelve - written in C++ using <a href="">HIDAPI</a> for HID interactions. HIDHelve creates a mailslot for publishing HID events and another mailslot for controlling the single instance of HIDHelve.  HIDHelve's standard output is easily parsed, if IPC like mailslots is unneeded. </li>
<li>AHKHIDMapper - simple AHK HIDHelve example. The AHK script launches HIDHelve, processes the HID data sent through the HIDHelve publishing mailslot, and signals HIDHelve to exit before termination of the script.</li>
</ul>
<br/>
<h2><span class="hasTip" title="no really, I'm wondering myself.">Why am I spending my personal time on such things?</span></h2>
Like most software, HIDHelve was born out of frustration.  I couldn't get AHKHID or any other AHK script which used the HID <a href="http://msdn.microsoft.com/en-us/library/ms645536(VS.85).aspx">RawInput apis</a> to work with my device.<br/>
<br/>
Mapping gamepads/footpedals should be simple kid stuff. But it isn't easy, you apparently need to be a software developer, capable of installing compilers, SDKs, and deciphering HID report data.<br/>
<br/>
In windows XP, MS gave us a Start>"Control Panel">"Game Controllers" which was a fairly <span class="hasTip" title="primative">easy</span> way to map gamepads/etc to your computer.  <span style='text-decoration:line-through'>This has been removed, with no replacement in current versions of windows.  That cool gravis gamepad from back in the day won't work on windows without custom software.</span>.<br/>
<br/>
I found that my usb gravis gamepad pro worked like a charm in win8 - no additional software required, shows up as a USB Input Device/HID-compliant game controller with a model of "GamePad Pro USB".<br/>
<a href="http://support.microsoft.com/kb/878478/en-us">The Gravis GamePad Pro device is not recognized when you install it on a Windows XP-based computer</a> - running joy.cpl works in win8.<br/>
<img src="/images/stories/HIDHelve/win8_gravis_gamepad_pro.png">
<img src="/images/stories/HIDHelve/win8_gamecontrollers.png">
<br/>
<br/>
Test the controller using joy.cpl; pressing buttons and moving the directional pad will show changes in the button and axis controls.  However, it doesn't provide a way to automate tasks from a users perspective (do something when I press this and do that).<br/>
<br/>
I think a modern OS should provide a simple mapper for hardware ppl have laying around their house. I can't really point to an OS/application today that does simple generic HID interfacing(mapping key presses/sliders to OS actions like mouse clicks, keyboard presses, etc) right for an everyday user out of the box.<br/>
<br/>
Where's the OS that asks me if I'd like to configure the generic 3/4/5/6/7/8 button HID device as an assistive device?  Without the installation of expensive specialized screen readers and custom hardware driver shims.<br/>
<br/>
People talk about <span class="hasTip" title="Accessible Rich Internet Applications">ARIA</span> (Accessible Rich Internet Applications), give me an <span class="hasTip" title="term I just made up">AOS</span>. <span class="hasTip" title="no really, I think I coined that.  one in the bank!">Accessible Operating System</span>.
<br/>
It'd be nice to have a general joystick/gamepad/hid mapper which was cross platform.  Working with DDE/WDK/DirectInput code to interface with custom hardware is tedious and easy to do <span class="hasTip" title="may I present to you -- exhibit a.">wrong</span>.<br/>
<br/>
<h2>HIDHelve Devices</h2>
These are some of the devices that I've used personally with HIDHelve.  Let me know if you use HIDHelve with some other device...<br/>
<img src="https://raw.github.com/davehorner/HIDHelve/master/artwork/footpedal.gif" alt="VEC/Infinity pedal" title="VEC/Infinity pedal" style="float:left"/>VEC/Infinity pedal
<br/>
<br style="clear:left;"/>

<h2>How do I use HIDHelve and AHKHIDMapper?</h2>
At this time there is no installer or separate download provided.  Pre-compiled windows unicode x86 64bit &amp; 32bit binaries are stored directly within github, you can also build HIDHelve from source.  Install <a href="http://www.autohotkey.com/">AutoHotkey</a>. Clone the repository and run AHKHIDMapper.ahk within examples/windows.<br/>
<img src="https://raw.github.com/davehorner/HIDHelve/master/artwork/ahkhidmapper.png" alt="current ahkhidmapper gui" title="current ahkhidmapper gui"/>  
<br/>
Above is a screen capture showing ahkhidmapper.ahk, which by default sets HIDHelve's command line parameters to "-pFoot".  You can change the default by editing ahkhidmapper.ahk DEFAULT_ARGUMENTS variable.<br/>
<br/>
<h2>Current HidHelve Help Output</h2>
Horner's HIDHelve - handle your human interface device.<br/>
your app listens to the PublishSlot for events or reads from my STDOUT.<br/>
if ControlSlot recieves a message, I exit nicely.<br/>
<br/>
General:<br/>
  -l [ --listmode ]            list devices on system and exit<br/>
  -h [ --help ]                produce this help message<br/>
  -v [ --verbose ] arg (=1)    verbosity level<br/>
  -e [ --exitvalue ] arg (=-1) termination value indicates when to exit (-1=none)<br/>
  -r [ --response-file ] arg   set settings from rsp file, @pathto.rsp also valid syntax.<br/>
<br/>
HID Specification:<br/>
  -P [ --Path ] arg     the full HID device path<br/>
  -p [ --product ] arg  regex to match against product<br/>
<br/>
Mailslot IPC:<br/>
  -d [ --domain ] arg (=.) mailslot IPC domain<br/>
  -s [ --slotname ] arg    mailslot IPC terminal subslot name (useful for multi-instance)<br/>
<br/>
<br/>
<h2>Example usage of HIDHelve</h2>
So, first run "HIDHelve -l" to get a listing of usb devices.  Try and locate the device you'd like to interface within the list.<br/>
<br/>
For example, when I run a listing on my computer with the "VEC USB Footpedal" attached.  I see the following within my HIDHelve -l output:
<pre>
path: \\?\hid#vid_05f3&amp;pid_00ff#8&amp;28b28e39&amp;0&amp;0000#{4d1e55b2-f16f-11cf-88cb-001111000030}
  serial_number:   Manufacturer: VEC
  Product:      VEC USB Footpedal
  Type: 05f3 00ff
  Release:      100
  Interface:    -1
</pre>
<br/>
  Currently, HIDHelve provides two methods of specifying a device. -P(--Path) and -p(--product).  The -pFoot default, works with my "VEC USB Footpedal" because the product field contains "Foot".  RegEx will be added in the future for more complex selection, but currently -p is a substr search.  It will select the first device that contains the specified product string.<br/>
<br/>
Using the -P or --Path parameter is as easy as selecting the path as listed.<br/>
-P"\\?\hid#vid_05f3&amp;pid_00ff#8&amp;28b28e39&amp;0&amp;0000#{4d1e55b2-f16f-11cf-88cb-001111000030}"<br/>
would be the example cmd line, when trying to use the path specification for my "VEC USB Footpedal".  The path will change when the device is placed on another usb port.<br/>
<br/>
HIDHelve is written to listen to one device at a time.  Once you specify either a path or product, HIDHelve will connect and listen to the device.  My foot pedal device sends a single byte.  HIDHelve displays the current hexadecimal value of that byte, along with binary representation of that same byte in the next column.  HIDHelve stores off the prior byte sent and <a href="http://en.wikipedia.org/wiki/Bitwise_operation#XOR">Bitwise XOR</a>'s that byte with the current byte being sent.  This XOR'd data is printed out within the next columns, again in hexadecimal and binary representations.<br/>
<br/>
Currently HIDHelve requires that another application be listening to the publish mailslot.  Otherwise it'll complain at you, as it attempts to resend the data over the mailslot twice for each byte received.<br/>
<pre>
[info]    OPENING \\?\hid#vid_05f3&amp;pid_00ff#7&amp;25f926ce&amp;0&amp;0000#{4d1e55b2-f16f-11cf-88cb-001111000030}
current(hex),current(binary),current^prior(hex),current^prior(bin)
02,00000010,02,00000010
[info]    attempting to open PublishSlot: \\.\mailslot\hornersHidHelvePublishSlot
[error]   open failed, perhaps there aren't any listeners?
[info]    attempting to open PublishSlot: \\.\mailslot\hornersHidHelvePublishSlot
[error]   open failed, perhaps there aren't any listeners?
</pre>
You can write your own application to connect to the mailslot and process the data.  Or, run the provided example ahkhidmapper.ahk, which connects to the mailslot if an instance of HIDHelve is already running, or will create a new instance of HIDHelve for you.<br/>
<br/>
ahkhidmapper.ahk receives data from HIDHelve through the PublishSlot(\\.\mailslot\hornersHidHelvePublishSlot). ahkhidmapper.ahk StringSplit's the data received into columns and uses the current and prior hexadecimal value to determine which autohotkey actions to take.
<br/>
ahkhidmapper.ahk signals HIDHelve to exit through ControlSlot(\\.\mailslot\hornersHidHelveControlSlot).  Currently HIDHelve exits cleanly when any data is received through the ControlSlot.<br/>
<br/>
<br/>
<h2>Is that all HIDHelve does?</h2>
What were you expecting?  It is just a helve.<br/>
The requirement on mailslots will go away, as mailslots are a MS specific technology.  <a href="http://www.amqp.org/">AMQP</a> replace/supplement mailslot communication?<br/>
In the future, maybe HIDHelve will allow you to perform actions itself.... but I sorta like that HIDHelve is small and just listens and broadcasts the data to interested apps.<br/>
put the action on the end of the handle.<br/>
<br/>
<br/>
<h2>Websites used in the making...</h2>
<a href="http://www.signal11.us/oss/hidapi/hidapi/doxygen/html/group__API.html#gaa5c9ed5aa290688ffac03343989ad75a">hidapi: hidapi API</a><br/>
<a href="https://github.com/nasfarley88/pedal2bash">nasfarley88/pedal2bash · GitHub</a> - A simple program to link up transcription pedal to keyboard presses. (using hidapi, centered around .sh files)<br/>
<a href="http://www.autohotkey.com/board/topic/55473-interprocess-communication-using-mailslots/">Interprocess communication using Mailslots - Scripts - AutoHotkey Community</a><br/>
<a href="http://www.autohotkey.com/board/topic/38015-ahkhid-an-ahk-implementation-of-the-hid-functions/">AHKHID - An AHK implementation of the HID functions - Scripts - AutoHotkey Community</a><br/>
<a href="http://www.darinhiggins.com/uniquely-identifying-rawinput-devices-in-autohotkey/">Uniquely Identifying RawInput Devices in AutoHotKey — Visual Basic Feng Shui</a><br/>
<a href="http://musingsfromtheunderground.blogspot.com/2011/05/dream-autohotkey-powered-foot-pedal-for.html">musings from the underground: The dream, AutoHotkey-powered foot pedal for programmers and ergonomanics</a><br/>
<a href="http://msdn.microsoft.com/en-us/library/aa365794(v=vs.85).aspx">Using Mailslots (Windows)</a><br/>
<a href="http://blog.didierstevens.com/2006/07/13/do-you-have-mailslots-on-your-windows-pc/">Do you have Mailslots on your Windows PC? « Didier Stevens</a> - a did ya know, process explorer can see mailslots, \Device\Mailslot. or C# string file in Directory.GetFiles(@".mailslot", "*.*", SearchOption.AllDirectories)<br/>
<a href="http://inkscape.org/">Inkscape. Draw Freely.</a> - <a href="https://upload.wikimedia.org/wikipedia/commons/4/4a/Axe_kirves.svg">Axe_kirves.svg</a> <a href="http://upload.wikimedia.org/wikipedia/commons/f/fd/USB_Icon.svg">USB_Icon.svg</a><br/>
<a href="https://gist.github.com/4422055">AHK CodeQuickTester GIST</a><br/>
<a href="http://www.autohotkey.com/board/topic/19990-windowpad-window-moving-tool/?hl=eventing">WindowPad - window-moving tool - Scripts - AutoHotkey Community</a> - latest download on first post.<br/>
<a href="https://github.com/hoppfrosch/WindowPadX">hoppfrosch/WindowPadX · GitHub</a> - enhanced WindowPad.<br/>
<a href="http://vjoystick.sourceforge.net/site/index.php/forum/5-Discussion/381-ujr-universal-joystick-remapper-ahk-gui-script">vJoy Forum :: Topic: UJR - Universal Joystick Remapper (AHK GUI script) (1/2)</a><br/>
<a href="http://vjoystick.sourceforge.net/site/">vjoystick Home</a> - vJoy is a device driver that bridges the gap between any device that is not a joystick and an application that requires a joystick.<br/>
<a href="http://www.autohotkey.com/board/topic/93442-hid-profiler-wheel-joystik-hotas/?hl=hid">HID Profiler - Wheel, Joystik, HOTAS - Scripts - AutoHotkey Community</a><br/>
<a href="http://www.youtube.com/watch?feature=player_embedded&amp;v=Ts1TpWo9njk">Building a custom game controller for the physically disabled - YouTube</a><br/>
<a href="http://thecontrollerproject.com/">The Controller Project | Building Custom gaming controllers</a><br/>
<a href="http://www.ablegamer.com/">Able Gamer</a><br/>


<br/>
<h2>strings for your spider.</h2>
Unrecognized VEC USB pedals<br/>
The foot pedal (Infinity IN-USB-1, VEC USB)<br/>
VEC USB foot pedal<br/>
infinity foot pedal c++<br/>
<a href="http://forum.videolan.org/viewtopic.php?f=13&amp;t=102713">The VideoLAN Forums • View topic - Transcription using USB VEC Infinity foot pedal</a><br/>
<a href="http://www.autohotkey.com/board/topic/26654-how-to-capture-footpedal-input/">How to capture footpedal input - Support - AutoHotkey Community</a> - last message "I didn't realize foot pedals were so popular.", thread is archived, otherwise, I'd post.<br/>
    <div style="border: 1px;">
    Created: 2012-12-31 18:17:24
    Modified: 2014-07-05 05:24:43
    </div>

		</section>

		<div class="holy-grail-sidebar-1 hg-sidebar">
           
<a href="/">/root</a> 
<a href="/s/">sections/</a><br/>
&gt;<a href="/p/cooking/peach-custard-pie/">peach custard pie</a><br/>
&gt;<a href="/t/linux-unix-and-friends/">linux</a><br/>
&gt;<a href="/t/windows/">windows</a><br/>
&gt;<a href="/t/programming/">programming</a><br/>
&gt;<a href="/t/random-technology/">random tech</a><br/>
&gt;<a href="/t/biology-math-science/">science</a><br/>
&gt;<a href="/p/projects-and-research/">research</a><br/>
<br/><br/>
<img src="/images/moonstars.webp" alt="moon and stars"/>
<br/><br/>
<div id="quote.left"></div>
<br/><br/>
<script>
    function randomq(){
	const url = "/quotes/quotes.json";
        fetch(url)
                  .then(response => response.json())
                  .then(quotes => {
                    var q = quotes[Math.floor(Math.random()*quotes.length)];
                    document.getElementById('quote.left').innerHTML = q.introtext;
                  })
                  .catch((err) => console.log("Can't access " + url + " response." + err));
    }
    randomq();
</script>
		</div>

		<div class="holy-grail-sidebar-2 hg-sidebar">
           
<div>
<a href="/p/projects-and-research/the-visible-dave-project"><img src="/images/brainmesh1.thumb.png" alt="My brain" title="my brain"/></a>
<br/>
<a href="/p/projects-and-research/the-visible-dave-project"><img src="/images/mrihead_frontfull3d.thumb.jpg" alt=""/>
<br/>Visible Dave Project</a>
</div>
<br/><br/>
<div>
0, 1, 1, 2, 3, 5, 8, 13, 21, 34,...<br/>
<b> x<sub>n</sub> = x<sub>n-1</sub> + x<sub>n-2</sub></b><br/>
<!-- "Fibonacci" was his nickname, which roughly means "Son of Bonacci". -->
</div>
		</div>

	</div>

	<footer>
		
        <div id="footer_r">
yak shaving since 2003-2023 by David A. Horner.<br>
proud yak member of the <a href="/t/random-technology/great-lodge-of-the-royal-order-of-yaks-yak-shaving/">Great Lodge of the Royal Order of Yaks</a><br>
</div>
	</footer>


<script>
	const burl = "/banners/banners.json";
  fetch(burl)
             .then(response => response.json())
             .then(banners => {
             var q = banners[Math.floor(Math.random()*banners.length)];
	           document.getElementById('banner.top').src=q.path;
             })
            .catch((err) => console.log("Can't access " + burl + " response." + err));
</script>

</body>

</html>